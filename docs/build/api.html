<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API Reference · Regress.jl</title><meta name="title" content="API Reference · Regress.jl"/><meta property="og:title" content="API Reference · Regress.jl"/><meta property="twitter:title" content="API Reference · Regress.jl"/><meta name="description" content="Documentation for Regress.jl."/><meta property="og:description" content="Documentation for Regress.jl."/><meta property="twitter:description" content="Documentation for Regress.jl."/><meta property="og:url" content="https://gragusa.github.io/Regress.jl/api.html"/><meta property="twitter:url" content="https://gragusa.github.io/Regress.jl/api.html"/><link rel="canonical" href="https://gragusa.github.io/Regress.jl/api.html"/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">Regress.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li><a class="tocitem" href="getting_started.html">Getting Started</a></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="ols.html">OLS Estimation</a></li><li><a class="tocitem" href="iv.html">IV Estimation</a></li><li><a class="tocitem" href="fixed_effects.html">Fixed Effects</a></li><li><a class="tocitem" href="variance.html">Variance Estimation</a></li></ul></li><li class="is-active"><a class="tocitem" href="api.html">API Reference</a><ul class="internal"><li><a class="tocitem" href="#Main-Functions"><span>Main Functions</span></a></li><li><a class="tocitem" href="#Model-Types"><span>Model Types</span></a></li><li><a class="tocitem" href="#IV-Estimators"><span>IV Estimators</span></a></li><li><a class="tocitem" href="#Variance-Specification"><span>Variance Specification</span></a></li><li><a class="tocitem" href="#StatsAPI-Interface"><span>StatsAPI Interface</span></a></li><li><a class="tocitem" href="#Model-Fields"><span>Model Fields</span></a></li><li><a class="tocitem" href="#Variance-Estimators"><span>Variance Estimators</span></a></li><li><a class="tocitem" href="#Index"><span>Index</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="api.html">API Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="api.html">API Reference</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/gragusa/MetricsLinearModels.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/gragusa/MetricsLinearModels.jl/blob/master/docs/src/api.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="API-Reference"><a class="docs-heading-anchor" href="#API-Reference">API Reference</a><a id="API-Reference-1"></a><a class="docs-heading-anchor-permalink" href="#API-Reference" title="Permalink"></a></h1><h2 id="Main-Functions"><a class="docs-heading-anchor" href="#Main-Functions">Main Functions</a><a id="Main-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Main-Functions" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="Regress.ols"><a class="docstring-binding" href="#Regress.ols"><code>Regress.ols</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">ols(df, formula; kwargs...) -&gt; OLSEstimator</code></pre><p>Estimate a linear model using Ordinary Least Squares (OLS).</p><p>Supports high-dimensional categorical variables (fixed effects) but not instrumental variables. For IV models, use <code>iv(estimator, df, formula)</code>.</p><p><strong>Arguments</strong></p><ul><li><code>df</code>: a Table (e.g., DataFrame)</li><li><code>formula</code>: A formula created using <code>@formula(y ~ x1 + x2 + fe(group))</code></li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>contrasts::Dict = Dict()</code>: Contrast codings for categorical variables</li><li><code>weights::Union{Nothing, Symbol}</code>: Column name for weights</li><li><code>save::Symbol = :residuals</code>: Save residuals (<code>:residuals</code>), fixed effects (<code>:fe</code>), or both (<code>:all</code>)</li><li><code>save_cluster::Union{Symbol, Vector{Symbol}, Nothing}</code>: Cluster variables to save for post-estimation vcov</li><li><code>dof_add::Integer = 0</code>: Manual adjustment to degrees of freedom</li><li><code>method::Symbol = :cpu</code>: Computation method (<code>:cpu</code>, <code>:CUDA</code>, <code>:Metal</code>)</li><li><code>nthreads::Integer</code>: Number of threads (default: <code>Threads.nthreads()</code> for CPU)</li><li><code>double_precision::Bool = true</code> for CPU, <code>false</code> otherwise: Use Float64 vs Float32</li><li><code>tol::Real = 1e-6</code>: Tolerance for fixed effects demeaning</li><li><code>maxiter::Integer = 10000</code>: Maximum iterations for fixed effects</li><li><code>drop_singletons::Bool = true</code>: Drop singleton observations</li><li><code>progress_bar::Bool = true</code>: Show progress bar during estimation</li><li><code>subset::Union{Nothing, AbstractVector}</code>: Select specific rows</li></ul><p><strong>Returns</strong></p><ul><li><code>OLSEstimator{T}</code>: Fitted model (T is Float64 or Float32 depending on <code>double_precision</code>)</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using DataFrames, RDatasets, Regress

df = dataset(&quot;plm&quot;, &quot;Cigar&quot;)

# Simple OLS
model = ols(df, @formula(Sales ~ NDI + Pop))

# With fixed effects
model = ols(df, @formula(Sales ~ NDI + fe(State) + fe(Year)))

# Post-estimation robust standard errors
vcov(HC3(), model)
vcov(:State, :CR1, model)  # cluster-robust

# With weights
model = ols(df, @formula(Sales ~ NDI), weights = :Pop)</code></pre><p><strong>Post-Estimation Variance Calculations</strong></p><p>After fitting a model, you can compute different variance-covariance matrices without re-running the regression:</p><pre><code class="language-julia hljs">model = ols(df, @formula(y ~ x1 + x2 + fe(firm_id)))

# Different robust estimators
vcov(HC3(), model)           # Heteroskedasticity-robust (HC3)
vcov(HC1(), model)           # Default (HC1)

# Cluster-robust (using stored cluster variable from fe())
vcov(:firm_id, :CR1, model)

# Two-way clustering
vcov((:firm_id, :year), :CR1, model)

# HAC (time series)
vcov(Bartlett(5), model)

# Standard errors and coefficient table
stderror(HC3(), model)
coeftable(model, :firm_id, :CR1)</code></pre><p>See also: <a href="api.html#Regress.iv"><code>iv</code></a>, <a href="api.html#Regress.OLSEstimator"><code>OLSEstimator</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gragusa/MetricsLinearModels.jl/blob/3a2bedab8fa1cfcc8d4b4e052da7c714e4cf3dcb/src/fit.jl#L7-L83">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Regress.iv"><a class="docstring-binding" href="#Regress.iv"><code>Regress.iv</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">iv(estimator::AbstractIVEstimator, df, formula; kwargs...) -&gt; IVEstimator</code></pre><p>Estimate an instrumental variables model using the specified estimator.</p><p><strong>Arguments</strong></p><ul><li><code>estimator::AbstractIVEstimator</code>: Estimator type (<code>TSLS()</code>, <code>LIML()</code>, <code>Fuller()</code>, <code>KClass()</code>)</li><li><code>df</code>: a Table (e.g., DataFrame)</li><li><code>formula</code>: A formula with IV syntax: <code>@formula(y ~ x + (endo ~ instrument))</code></li></ul><p><strong>Keyword Arguments</strong></p><p>Same as <code>ols()</code>, plus:</p><ul><li><code>first_stage::Bool = true</code>: Compute first-stage F-statistics</li></ul><p><strong>Returns</strong></p><ul><li><code>IVEstimator{T}</code>: Fitted IV model (T is Float64 or Float32 depending on <code>double_precision</code>)</li></ul><p><strong>Available Estimators</strong></p><ul><li><code>TSLS()</code>: Two-Stage Least Squares (k = 1)</li><li><code>LIML()</code>: Limited Information Maximum Likelihood (k = k_LIML)</li><li><code>Fuller(a)</code>: Fuller bias-corrected estimator (k = k_LIML - a/(n-L-p)), default a=1</li><li><code>KClass(k)</code>: Generic K-class estimator with user-specified k</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using DataFrames, RDatasets, Regress

df = dataset(&quot;plm&quot;, &quot;Cigar&quot;)

# Two-stage least squares
model = iv(TSLS(), df, @formula(Sales ~ NDI + (Price ~ Pimin)))

# LIML (better with weak instruments)
model = iv(LIML(), df, @formula(Sales ~ NDI + (Price ~ Pimin)))

# Fuller bias-corrected (approximately median-unbiased)
model = iv(Fuller(), df, @formula(Sales ~ NDI + (Price ~ Pimin)))
model = iv(Fuller(4.0), df, @formula(Sales ~ NDI + (Price ~ Pimin)))  # minimize MSE

# Generic K-class
model = iv(KClass(0.5), df, @formula(Sales ~ NDI + (Price ~ Pimin)))

# With fixed effects
model = iv(TSLS(), df, @formula(Sales ~ (Price ~ Pimin) + fe(State)))

# Post-estimation
vcov(HC3(), model)
coeftable(model)</code></pre><p><strong>Post-Estimation Variance Calculations</strong></p><p>IV models support the same post-estimation vcov calculations as OLS:</p><pre><code class="language-julia hljs">model = iv(TSLS(), df, @formula(y ~ x + (endo ~ instrument)))

# Heteroskedasticity-robust
vcov(HC3(), model)

# Update model with different vcov
model_hc3 = model + vcov(HC3())

# Cluster-robust (save cluster variable when fitting)
model = iv(TSLS(), df, @formula(y ~ x + (endo ~ inst)), save_cluster = :firm_id)
vcov(CR1(:firm_id), model)

# Two-way clustering
model = iv(TSLS(), df, @formula(...), save_cluster = [:firm_id, :year])
vcov(CR1(:firm_id, :year), model)</code></pre><p>See also: <a href="api.html#Regress.ols"><code>ols</code></a>, <a href="api.html#Regress.TSLS"><code>TSLS</code></a>, <a href="iv.html#LIML"><code>LIML</code></a>, <a href="iv.html#Fuller"><code>Fuller</code></a>, <a href="iv.html#KClass"><code>KClass</code></a>, <a href="api.html#Regress.IVEstimator"><code>IVEstimator</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gragusa/MetricsLinearModels.jl/blob/3a2bedab8fa1cfcc8d4b4e052da7c714e4cf3dcb/src/fit.jl#L96-L169">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Regress.fe"><a class="docstring-binding" href="#Regress.fe"><code>Regress.fe</code></a> — <span class="docstring-category">Function</span></summary><section><div><p>fe(m::OLSEstimator; keepkeys = false)</p><p>Return a DataFrame with fixed effects estimates. The output is aligned with the original DataFrame used in <code>ols</code>.</p><p><strong>Keyword arguments</strong></p><ul><li><code>keepkeys::Bool</code> : Should the returned DataFrame include the original variables used to define groups? Default to false</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gragusa/MetricsLinearModels.jl/blob/3a2bedab8fa1cfcc8d4b4e052da7c714e4cf3dcb/src/LinearModel.jl#L320-L328">source</a></section><section><div><p>fe(m::IVEstimator; keepkeys = false)</p><p>Return a DataFrame with fixed effects estimates.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gragusa/MetricsLinearModels.jl/blob/3a2bedab8fa1cfcc8d4b4e052da7c714e4cf3dcb/src/IVModel.jl#L759-L763">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Regress.partial_out"><a class="docstring-binding" href="#Regress.partial_out"><code>Regress.partial_out</code></a> — <span class="docstring-category">Function</span></summary><section><div><p>Partial out variables in a Dataframe</p><p><strong>Arguments</strong></p><ul><li><code>df</code>: A table</li><li><code>formula::FormulaTerm</code>: A formula created using <code>@formula</code></li><li><code>add_mean::Bool</code>: Should the initial mean added to the returned variable?</li><li><code>method::Symbol</code>: A symbol for the method. Default is :cpu. Alternatively,  :gpu requires <code>CuArrays</code>. In this case, use the option <code>double_precision = false</code> to use <code>Float32</code>.</li><li><code>maxiter::Integer</code>: Maximum number of iterations</li><li><code>double_precision::Bool</code>: Should the demeaning operation use Float64 rather than Float32? Default to true.</li><li><code>tol::Real</code>: Tolerance</li><li><code>align::Bool</code>: Should the returned DataFrame align with the original DataFrame in case of missing values? Default to true.</li></ul><p><strong>Returns</strong></p><ul><li><code>::DataFrame</code>: a dataframe with as many columns as there are dependent variables and as many rows as the original dataframe.</li><li><code>::Vector{Int}</code>: a vector of iterations for each column</li><li><code>::Vector{Bool}</code>: a vector of success for each column</li></ul><p><strong>Details</strong></p><p><code>partial_out</code> returns the residuals of a set of variables after regressing them on a set of regressors. The syntax is similar to <code>reg</code> - but it accepts multiple dependent variables. It returns a dataframe with as many columns as there are dependent variables and as many rows as the original dataframe. The regression model is estimated on only the rows where <em>none</em> of the dependent variables is missing.  Finally, with the option <code>add_mean = true</code>, the mean of the initial variable is added to the residuals.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using  RDatasets, DataFrames, MetricsOLSEstimators, Gadfly
df = dataset(&quot;datasets&quot;, &quot;iris&quot;)
result = partial_out(df, @formula(SepalWidth + SepalLength ~ fe(Species)), add_mean = true)
plot(layer(result[1], x=&quot;SepalWidth&quot;, y=&quot;SepalLength&quot;, Stat.binmean(n=10), Geom.point),
   layer(result[1], x=&quot;SepalWidth&quot;, y=&quot;SepalLength&quot;, Geom.smooth(method=:lm)))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gragusa/MetricsLinearModels.jl/blob/3a2bedab8fa1cfcc8d4b4e052da7c714e4cf3dcb/src/partial_out.jl#L1-L32">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Regress.first_stage"><a class="docstring-binding" href="#Regress.first_stage"><code>Regress.first_stage</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">first_stage(m::IVEstimator) -&gt; FirstStageResult</code></pre><p>Return first-stage diagnostics for an IV model. Uses the variance estimator stored in the model.</p><p><strong>Returns</strong></p><p>A <code>FirstStageResult</code> struct containing:</p><ul><li>Joint Kleibergen-Paap F-statistic and p-value</li><li>Per-endogenous F-statistics and p-values</li><li>Metadata (number of instruments, variance estimator type)</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">model = iv(TSLS(), df, @formula(y ~ x + (endo ~ z1 + z2)))
fs = first_stage(model)
fs.F_joint           # Joint F-statistic
fs.F_per_endo        # Per-endogenous F-stats</code></pre><p>See also: <a href="api.html#Regress.FirstStageResult"><code>FirstStageResult</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gragusa/MetricsLinearModels.jl/blob/3a2bedab8fa1cfcc8d4b4e052da7c714e4cf3dcb/src/IVModel.jl#L1131-L1152">source</a></section></details></article><h2 id="Model-Types"><a class="docs-heading-anchor" href="#Model-Types">Model Types</a><a id="Model-Types-1"></a><a class="docs-heading-anchor-permalink" href="#Model-Types" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="Regress.OLSEstimator"><a class="docstring-binding" href="#Regress.OLSEstimator"><code>Regress.OLSEstimator</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">OLSEstimator &lt;: StatsAPI.RegressionModel</code></pre><p>Model type for linear regression estimated by ordinary least squares (OLS).</p><p>Uses a GLM.jl-compatible structure with separate response (<code>rr</code>) and predictor (<code>pp</code>) components, plus econometrics-specific fixed effects (<code>fes</code>).</p><p>Use <code>ols(df, formula)</code> to fit this model type.</p><p><strong>Type Parameters</strong></p><ul><li><code>T</code>: Float type (Float64 or Float32)</li><li><code>P</code>: Predictor type (OLSPredictorChol or OLSPredictorQR)</li><li><code>V</code>: Variance-covariance estimator type (HC1, HC3, CR1, etc.)</li></ul><p><strong>Fields</strong></p><ul><li><code>rr::OLSResponse{T}</code>: Response object (y, fitted values, weights)</li><li><code>pp::OLSLinearPredictor{T}</code>: Predictor object (X, coefficients, factorization)</li><li><code>fes::OLSFixedEffects{T}</code>: Fixed effects component</li><li><code>formula::FormulaTerm</code>: Original formula</li><li><code>formula_schema::FormulaTerm</code>: Schema for predict</li><li><code>contrasts::Dict</code>: Contrasts used</li><li><code>esample::BitVector</code>: Estimation sample indicator</li><li><code>coefnames::Vector{String}</code>: Coefficient names</li><li><code>basis_coef::BitVector</code>: Non-collinear coefficients indicator</li><li><code>nobs::Int</code>: Number of observations</li><li><code>dof::Int</code>: Degrees of freedom (parameters estimated)</li><li><code>dof_fes::Int</code>: DOF absorbed by fixed effects</li><li><code>dof_residual::Int</code>: Residual degrees of freedom</li><li><code>tss_total::T</code>: Total sum of squares (before FE)</li><li><code>tss_partial::T</code>: TSS after partialing out FEs</li><li><code>rss::T</code>: Residual sum of squares</li><li><code>r2::T</code>: R-squared</li><li><code>r2_within::T</code>: Within R-squared (with FEs)</li><li><code>has_intercept::Bool</code>: Whether model has intercept</li><li><code>vcov_estimator::V</code>: Variance-covariance estimator (deep copy)</li><li><code>vcov_matrix::Symmetric{T, Matrix{T}}</code>: Precomputed variance-covariance matrix</li><li><code>se::Vector{T}</code>: Standard errors</li><li><code>t_stats::Vector{T}</code>: t-statistics</li><li><code>p_values::Vector{T}</code>: p-values</li><li><code>F::T</code>: F-statistic (computed with vcov_estimator)</li><li><code>p::T</code>: P-value of F-statistic</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gragusa/MetricsLinearModels.jl/blob/3a2bedab8fa1cfcc8d4b4e052da7c714e4cf3dcb/src/LinearModel.jl#L7-L49">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Regress.IVEstimator"><a class="docstring-binding" href="#Regress.IVEstimator"><code>Regress.IVEstimator</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">IVEstimator &lt;: StatsAPI.RegressionModel</code></pre><p>Model type for instrumental variables regression.</p><p>Use <code>iv(estimator, df, formula)</code> to fit this model type, where <code>estimator</code> is one of <code>TSLS()</code>, <code>LIML()</code>, etc.</p><p><strong>Type Parameters</strong></p><ul><li><code>T</code>: Float type (Float64 or Float32)</li><li><code>V</code>: Variance-covariance estimator type (HC1, HC3, CR1, etc.)</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">iv(TSLS(), df, @formula(y ~ x + (endo ~ instrument)))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gragusa/MetricsLinearModels.jl/blob/3a2bedab8fa1cfcc8d4b4e052da7c714e4cf3dcb/src/IVModel.jl#L93-L109">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Regress.FirstStageResult"><a class="docstring-binding" href="#Regress.FirstStageResult"><code>Regress.FirstStageResult</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">FirstStageResult{T}</code></pre><p>Container for first-stage regression diagnostics from IV estimation. Returned by <code>first_stage(model)</code>.</p><p><strong>Fields</strong></p><ul><li><code>F_joint::T</code>: Joint first-stage F-statistic (Kleibergen-Paap)</li><li><code>p_joint::T</code>: p-value of joint F-statistic</li><li><code>endogenous_names::Vector{String}</code>: Names of endogenous variables</li><li><code>F_per_endo::Vector{T}</code>: F-statistic for each endogenous variable</li><li><code>p_per_endo::Vector{T}</code>: p-value for each endogenous variable</li><li><code>n_endogenous::Int</code>: Number of endogenous variables</li><li><code>n_instruments::Int</code>: Number of excluded instruments</li><li><code>vcov_type::String</code>: Variance estimator used (e.g., &quot;HC1&quot;, &quot;HC3&quot;)</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">model = iv(TSLS(), df, @formula(y ~ x + (endo ~ z1 + z2)))
fs = first_stage(model)
fs.F_joint           # Joint F-statistic
fs.F_per_endo        # Per-endogenous F-statistics</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gragusa/MetricsLinearModels.jl/blob/3a2bedab8fa1cfcc8d4b4e052da7c714e4cf3dcb/src/IVModel.jl#L28-L51">source</a></section></details></article><h2 id="IV-Estimators"><a class="docs-heading-anchor" href="#IV-Estimators">IV Estimators</a><a id="IV-Estimators-1"></a><a class="docs-heading-anchor-permalink" href="#IV-Estimators" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="Regress.AbstractIVEstimator"><a class="docstring-binding" href="#Regress.AbstractIVEstimator"><code>Regress.AbstractIVEstimator</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">AbstractIVEstimator</code></pre><p>Abstract type for instrumental variables estimators.</p><p>Concrete subtypes include:</p><ul><li><code>TSLS</code>: Two-Stage Least Squares (k = 1)</li><li><code>LIML</code>: Limited Information Maximum Likelihood (k = k_LIML)</li><li><code>Fuller</code>: Fuller bias-corrected estimator (k = k_LIML - a/(n-L-p))</li><li><code>KClass</code>: Generic K-class estimator with user-specified k</li></ul><p>All estimators are used via the <code>iv()</code> function:</p><pre><code class="language-julia hljs">iv(TSLS(), df, @formula(y ~ x + (endo ~ instrument)))
iv(LIML(), df, @formula(y ~ x + (endo ~ instrument)))
iv(Fuller(), df, @formula(y ~ x + (endo ~ instrument)))
iv(Fuller(4.0), df, @formula(y ~ x + (endo ~ instrument)))
iv(KClass(0.5), df, @formula(y ~ x + (endo ~ instrument)))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gragusa/MetricsLinearModels.jl/blob/3a2bedab8fa1cfcc8d4b4e052da7c714e4cf3dcb/src/estimators.jl#L7-L26">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Regress.TSLS"><a class="docstring-binding" href="#Regress.TSLS"><code>Regress.TSLS</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">TSLS &lt;: AbstractIVEstimator</code></pre><p>Two-Stage Least Squares (2SLS) estimator for instrumental variables models.</p><p>This is the most common IV estimator, which proceeds in two stages:</p><ol><li>First stage: Regress endogenous variables on instruments and exogenous variables</li><li>Second stage: Regress outcome on predicted endogenous variables and exogenous variables</li></ol><p><strong>Usage</strong></p><pre><code class="language-julia hljs">iv(TSLS(), df, @formula(y ~ x + (endo ~ instrument)))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gragusa/MetricsLinearModels.jl/blob/3a2bedab8fa1cfcc8d4b4e052da7c714e4cf3dcb/src/estimators.jl#L29-L42">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Regress.LIML"><a class="docstring-binding" href="#Regress.LIML"><code>Regress.LIML</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">LIML &lt;: AbstractIVEstimator</code></pre><p>Limited Information Maximum Likelihood estimator for instrumental variables models.</p><p>LIML is an alternative to 2SLS that can have better finite-sample properties, especially when instruments are weak. It uses k = k_LIML, the minimum eigenvalue of the generalized eigenvalue problem M1 * v = k * M2 * v.</p><p><strong>Usage</strong></p><pre><code class="language-julia hljs">iv(LIML(), df, @formula(y ~ x + (endo ~ instrument)))</code></pre><p><strong>References</strong></p><p>Anderson, T. W. and Rubin, H. (1949). Estimation of the parameters of a single equation in a complete system of stochastic equations. Annals of Mathematical Statistics, 20(1):46-63.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gragusa/MetricsLinearModels.jl/blob/3a2bedab8fa1cfcc8d4b4e052da7c714e4cf3dcb/src/estimators.jl#L45-L63">source</a></section></details></article><h2 id="Variance-Specification"><a class="docs-heading-anchor" href="#Variance-Specification">Variance Specification</a><a id="Variance-Specification-1"></a><a class="docs-heading-anchor-permalink" href="#Variance-Specification" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="Regress.VcovSpec"><a class="docstring-binding" href="#Regress.VcovSpec"><code>Regress.VcovSpec</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">VcovSpec{V}</code></pre><p>Wrapper type for variance estimator specification. Used with <code>+</code> operator: <code>model + vcov(HC3())</code></p><p><strong>Fields</strong></p><ul><li><code>estimator::V</code>: The variance estimator (HC0, CR1, etc.)</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">model = ols(df, @formula(y ~ x))
model_hc3 = model + vcov(HC3())
model_cr1 = model + vcov(CR1(:cluster))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gragusa/MetricsLinearModels.jl/blob/3a2bedab8fa1cfcc8d4b4e052da7c714e4cf3dcb/src/utils/vcov_spec.jl#L7-L22">source</a></section></details></article><h2 id="StatsAPI-Interface"><a class="docs-heading-anchor" href="#StatsAPI-Interface">StatsAPI Interface</a><a id="StatsAPI-Interface-1"></a><a class="docs-heading-anchor-permalink" href="#StatsAPI-Interface" title="Permalink"></a></h2><p>All fitted models (<code>OLSEstimator</code>, <code>IVEstimator</code>) implement the StatsAPI interface:</p><h3 id="Coefficients-and-Inference"><a class="docs-heading-anchor" href="#Coefficients-and-Inference">Coefficients and Inference</a><a id="Coefficients-and-Inference-1"></a><a class="docs-heading-anchor-permalink" href="#Coefficients-and-Inference" title="Permalink"></a></h3><table><tr><th style="text-align: right">Function</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right"><code>coef(model)</code></td><td style="text-align: right">Coefficient estimates</td></tr><tr><td style="text-align: right"><code>coefnames(model)</code></td><td style="text-align: right">Coefficient names</td></tr><tr><td style="text-align: right"><code>stderror(model)</code></td><td style="text-align: right">Standard errors (default HC1)</td></tr><tr><td style="text-align: right"><code>stderror(vcov_type, model)</code></td><td style="text-align: right">Standard errors with specific vcov</td></tr><tr><td style="text-align: right"><code>vcov(model)</code></td><td style="text-align: right">Variance-covariance matrix</td></tr><tr><td style="text-align: right"><code>vcov(vcov_type, model)</code></td><td style="text-align: right">Vcov with specific estimator</td></tr><tr><td style="text-align: right"><code>confint(model)</code></td><td style="text-align: right">95% confidence intervals</td></tr><tr><td style="text-align: right"><code>coeftable(model)</code></td><td style="text-align: right">Full coefficient table</td></tr></table><h3 id="Model-Statistics"><a class="docs-heading-anchor" href="#Model-Statistics">Model Statistics</a><a id="Model-Statistics-1"></a><a class="docs-heading-anchor-permalink" href="#Model-Statistics" title="Permalink"></a></h3><table><tr><th style="text-align: right">Function</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right"><code>nobs(model)</code></td><td style="text-align: right">Number of observations</td></tr><tr><td style="text-align: right"><code>dof(model)</code></td><td style="text-align: right">Degrees of freedom (model)</td></tr><tr><td style="text-align: right"><code>dof_residual(model)</code></td><td style="text-align: right">Degrees of freedom (residual)</td></tr><tr><td style="text-align: right"><code>r2(model)</code></td><td style="text-align: right">R-squared</td></tr><tr><td style="text-align: right"><code>adjr2(model)</code></td><td style="text-align: right">Adjusted R-squared</td></tr><tr><td style="text-align: right"><code>deviance(model)</code></td><td style="text-align: right">Residual sum of squares</td></tr><tr><td style="text-align: right"><code>nulldeviance(model)</code></td><td style="text-align: right">Null model deviance</td></tr><tr><td style="text-align: right"><code>loglikelihood(model)</code></td><td style="text-align: right">Log-likelihood</td></tr><tr><td style="text-align: right"><code>nullloglikelihood(model)</code></td><td style="text-align: right">Null model log-likelihood</td></tr></table><h3 id="Prediction-and-Residuals"><a class="docs-heading-anchor" href="#Prediction-and-Residuals">Prediction and Residuals</a><a id="Prediction-and-Residuals-1"></a><a class="docs-heading-anchor-permalink" href="#Prediction-and-Residuals" title="Permalink"></a></h3><table><tr><th style="text-align: right">Function</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right"><code>fitted(model)</code></td><td style="text-align: right">Fitted values (if saved)</td></tr><tr><td style="text-align: right"><code>residuals(model)</code></td><td style="text-align: right">Residuals (if saved)</td></tr><tr><td style="text-align: right"><code>predict(model, newdata)</code></td><td style="text-align: right">Predict for new data</td></tr><tr><td style="text-align: right"><code>responsename(model)</code></td><td style="text-align: right">Name of response variable</td></tr></table><h2 id="Model-Fields"><a class="docs-heading-anchor" href="#Model-Fields">Model Fields</a><a id="Model-Fields-1"></a><a class="docs-heading-anchor-permalink" href="#Model-Fields" title="Permalink"></a></h2><h3 id="OLSEstimator-Fields"><a class="docs-heading-anchor" href="#OLSEstimator-Fields">OLSEstimator Fields</a><a id="OLSEstimator-Fields-1"></a><a class="docs-heading-anchor-permalink" href="#OLSEstimator-Fields" title="Permalink"></a></h3><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right"><code>coef</code></td><td style="text-align: right"><code>Vector{T}</code></td><td style="text-align: right">Coefficient estimates</td></tr><tr><td style="text-align: right"><code>vcov_matrix</code></td><td style="text-align: right"><code>Matrix{T}</code></td><td style="text-align: right">Variance-covariance matrix</td></tr><tr><td style="text-align: right"><code>F</code></td><td style="text-align: right"><code>T</code></td><td style="text-align: right">Robust Wald F-statistic</td></tr><tr><td style="text-align: right"><code>p</code></td><td style="text-align: right"><code>T</code></td><td style="text-align: right">p-value of F-statistic</td></tr><tr><td style="text-align: right"><code>esample</code></td><td style="text-align: right"><code>BitVector</code></td><td style="text-align: right">Estimation sample indicator</td></tr><tr><td style="text-align: right"><code>nobs</code></td><td style="text-align: right"><code>Int</code></td><td style="text-align: right">Number of observations</td></tr><tr><td style="text-align: right"><code>dof</code></td><td style="text-align: right"><code>Int</code></td><td style="text-align: right">Model degrees of freedom</td></tr><tr><td style="text-align: right"><code>dof_residual</code></td><td style="text-align: right"><code>Int</code></td><td style="text-align: right">Residual degrees of freedom</td></tr><tr><td style="text-align: right"><code>dof_fes</code></td><td style="text-align: right"><code>Int</code></td><td style="text-align: right">Fixed effects degrees of freedom</td></tr><tr><td style="text-align: right"><code>rss</code></td><td style="text-align: right"><code>T</code></td><td style="text-align: right">Residual sum of squares</td></tr><tr><td style="text-align: right"><code>tss</code></td><td style="text-align: right"><code>T</code></td><td style="text-align: right">Total sum of squares</td></tr><tr><td style="text-align: right"><code>r2</code></td><td style="text-align: right"><code>T</code></td><td style="text-align: right">R-squared</td></tr><tr><td style="text-align: right"><code>r2_within</code></td><td style="text-align: right"><code>T</code></td><td style="text-align: right">Within R-squared (if FE)</td></tr><tr><td style="text-align: right"><code>adjr2</code></td><td style="text-align: right"><code>T</code></td><td style="text-align: right">Adjusted R-squared</td></tr><tr><td style="text-align: right"><code>converged</code></td><td style="text-align: right"><code>Bool</code></td><td style="text-align: right">Convergence status</td></tr><tr><td style="text-align: right"><code>iterations</code></td><td style="text-align: right"><code>Int</code></td><td style="text-align: right">Number of iterations</td></tr></table><h3 id="IVEstimator-Fields"><a class="docs-heading-anchor" href="#IVEstimator-Fields">IVEstimator Fields</a><a id="IVEstimator-Fields-1"></a><a class="docs-heading-anchor-permalink" href="#IVEstimator-Fields" title="Permalink"></a></h3><p>All fields from <code>OLSEstimator</code>, plus:</p><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right"><code>F_kp</code></td><td style="text-align: right"><code>T</code></td><td style="text-align: right">Joint first-stage F-statistic</td></tr><tr><td style="text-align: right"><code>p_kp</code></td><td style="text-align: right"><code>T</code></td><td style="text-align: right">p-value of joint F</td></tr><tr><td style="text-align: right"><code>F_kp_per_endo</code></td><td style="text-align: right"><code>Vector{T}</code></td><td style="text-align: right">Per-endogenous F-statistics</td></tr><tr><td style="text-align: right"><code>p_kp_per_endo</code></td><td style="text-align: right"><code>Vector{T}</code></td><td style="text-align: right">Per-endogenous p-values</td></tr></table><h2 id="Variance-Estimators"><a class="docs-heading-anchor" href="#Variance-Estimators">Variance Estimators</a><a id="Variance-Estimators-1"></a><a class="docs-heading-anchor-permalink" href="#Variance-Estimators" title="Permalink"></a></h2><h3 id="Heteroskedasticity-Robust"><a class="docs-heading-anchor" href="#Heteroskedasticity-Robust">Heteroskedasticity-Robust</a><a id="Heteroskedasticity-Robust-1"></a><a class="docs-heading-anchor-permalink" href="#Heteroskedasticity-Robust" title="Permalink"></a></h3><p>From CovarianceMatrices.jl:</p><pre><code class="language-julia hljs">HC0()   # White&#39;s estimator
HC1()   # DOF-adjusted (default)
HC2()   # Leverage-adjusted
HC3()   # Jackknife-like
HC4()   # Cribari-Neto
HC5()   # Cribari-Neto modified</code></pre><h3 id="Cluster-Robust"><a class="docs-heading-anchor" href="#Cluster-Robust">Cluster-Robust</a><a id="Cluster-Robust-1"></a><a class="docs-heading-anchor-permalink" href="#Cluster-Robust" title="Permalink"></a></h3><pre><code class="language-julia hljs">CR0(:cluster)           # No adjustment
CR1(:cluster)           # G/(G-1) adjustment
CR2(:cluster)           # Bell-McCaffrey
CR3(:cluster)           # Squared leverage

# Multi-way
CR1(:cluster1, :cluster2)</code></pre><h3 id="HAC"><a class="docs-heading-anchor" href="#HAC">HAC</a><a id="HAC-1"></a><a class="docs-heading-anchor-permalink" href="#HAC" title="Permalink"></a></h3><pre><code class="language-julia hljs">Bartlett(bandwidth)
Parzen(bandwidth)
QuadraticSpectral(bandwidth)
TukeyHanning(bandwidth)
Truncated(bandwidth)</code></pre><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="api.html#Regress.AbstractIVEstimator"><code>Regress.AbstractIVEstimator</code></a></li><li><a href="api.html#Regress.FirstStageResult"><code>Regress.FirstStageResult</code></a></li><li><a href="api.html#Regress.IVEstimator"><code>Regress.IVEstimator</code></a></li><li><a href="api.html#Regress.LIML"><code>Regress.LIML</code></a></li><li><a href="api.html#Regress.OLSEstimator"><code>Regress.OLSEstimator</code></a></li><li><a href="api.html#Regress.TSLS"><code>Regress.TSLS</code></a></li><li><a href="api.html#Regress.VcovSpec"><code>Regress.VcovSpec</code></a></li><li><a href="api.html#Regress.fe"><code>Regress.fe</code></a></li><li><a href="api.html#Regress.first_stage"><code>Regress.first_stage</code></a></li><li><a href="api.html#Regress.iv"><code>Regress.iv</code></a></li><li><a href="api.html#Regress.ols"><code>Regress.ols</code></a></li><li><a href="api.html#Regress.partial_out"><code>Regress.partial_out</code></a></li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="variance.html">« Variance Estimation</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Wednesday 24 December 2025 23:55">Wednesday 24 December 2025</span>. Using Julia version 1.12.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
